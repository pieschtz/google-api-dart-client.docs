        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>DateImplementation Class / coreimpl Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="coreimpl" data-type="DateImplementation">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../coreimpl.html">coreimpl</a> &rsaquo; <a href="../coreimpl/DateImplementation.html">DateImplementation</a></div>
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>DateImplementation</strong>
          Class
        </h2>
        
<div class="doc">

</div>
<h3>Implements</h3>
<p>
<span class="type-box"><span class="icon-interface"></span><a href="../core/Date.html">Date</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
new <strong>DateImplementation</strong>.now() <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
DateImplementation.now()
    : isUtc = false,
      millisecondsSinceEpoch = Primitives.dateNow() {
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
factory <strong>DateImplementation</strong>.fromString(<a href="../core/String.html">String</a> formattedString) <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
factory DateImplementation.fromString(String formattedString) {
  // Read in (a subset of) ISO 8601.
  // Examples:
  //    - "2012-02-27 13:27:00"
  //    - "2012-02-27 13:27:00.423z"
  //    - "20120227 13:27:00"
  //    - "20120227T132700"
  //    - "20120227"
  //    - "2012-02-27T14Z"
  //    - "-123450101 00:00:00 Z"  // In the year -12345.
  final RegExp re = const RegExp(
      @'^([+-]?\d?\d\d\d\d)-?(\d\d)-?(\d\d)' // The day part.
      @'(?:[ T](\d\d)(?::?(\d\d)(?::?(\d\d)(.\d{1,6})?)?)? ?([zZ])?)?$');
  Match match = re.firstMatch(formattedString);
  if (match !== null) {
    int parseIntOrZero(String matched) {
      // TODO(floitsch): we should not need to test against the empty string.
      if (matched === null || matched == "") return 0;
      return Math.parseInt(matched);
    }

    double parseDoubleOrZero(String matched) {
      // TODO(floitsch): we should not need to test against the empty string.
      if (matched === null || matched == "") return 0.0;
      return Math.parseDouble(matched);
    }

    int years = Math.parseInt(match[1]);
    int month = Math.parseInt(match[2]);
    int day = Math.parseInt(match[3]);
    int hour = parseIntOrZero(match[4]);
    int minute = parseIntOrZero(match[5]);
    int second = parseIntOrZero(match[6]);
    bool addOneMillisecond = false;
    int millisecond = (parseDoubleOrZero(match[7]) * 1000).round().toInt();
    if (millisecond == 1000) {
      addOneMillisecond = true;
      millisecond = 999;
    }
    // TODO(floitsch): we should not need to test against the empty string.
    bool isUtc = (match[8] !== null) &amp;&amp; (match[8] != "");
    int millisecondsSinceEpoch = Primitives.valueFromDecomposedDate(
        years, month, day, hour, minute, second, millisecond, isUtc);
    if (millisecondsSinceEpoch === null) {
      throw new IllegalArgumentException(formattedString);
    }
    if (addOneMillisecond) millisecondsSinceEpoch++;
    return new DateImplementation.fromMillisecondsSinceEpoch(
        millisecondsSinceEpoch, isUtc);
  } else {
    throw new IllegalArgumentException(formattedString);
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
new <strong>DateImplementation</strong>.fromMillisecondsSinceEpoch(<a href="../core/int.html">int</a> millisecondsSinceEpoch, [<a href="../core/bool.html">bool</a> isUtc = false]) <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
DateImplementation.fromMillisecondsSinceEpoch(this.millisecondsSinceEpoch,
                                              [bool isUtc = false])
    : this.isUtc = checkNull(isUtc) {
  if (millisecondsSinceEpoch.abs() &gt; _MAX_MILLISECONDS_SINCE_EPOCH) {
    throw new IllegalArgumentException(millisecondsSinceEpoch);
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
new <strong>DateImplementation</strong>(<a href="../core/int.html">int</a> years, [<a href="../core/int.html">int</a> month = 1, <a href="../core/int.html">int</a> day = 1, <a href="../core/int.html">int</a> hour = 0, <a href="../core/int.html">int</a> minute = 0, <a href="../core/int.html">int</a> second = 0, <a href="../core/int.html">int</a> millisecond = 0, <a href="../core/bool.html">bool</a> isUtc = false]) <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
DateImplementation(int years,
                   [int month = 1,
                    int day = 1,
                    int hour = 0,
                    int minute = 0,
                    int second = 0,
                    int millisecond = 0,
                    bool isUtc = false])
    : this.isUtc = checkNull(isUtc),
      millisecondsSinceEpoch = Primitives.valueFromDecomposedDate(
          years, month, day, hour, minute, second, millisecond, isUtc) {
  _asJs();
}
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id="add">
<span class="show-code">Code</span>
<a href="../core/Date.html">Date</a> <strong>add</strong>(<a href="../core/Duration.html">Duration</a> duration) <a class="anchor-link" href="#add"
              title="Permalink to DateImplementation.add">#</a></h4>
<div class="doc">

<pre class="source">
Date add(Duration duration) {
  int ms = millisecondsSinceEpoch;
  return new DateImplementation.fromMillisecondsSinceEpoch(
      ms + duration.inMilliseconds, isUtc);
}
</pre>
</div>
</div>
<div class="method"><h4 id="compareTo">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>compareTo</strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#compareTo"
              title="Permalink to DateImplementation.compareTo">#</a></h4>
<div class="doc">

<pre class="source">
int compareTo(Date other)
    =&gt; millisecondsSinceEpoch.compareTo(other.millisecondsSinceEpoch);
</pre>
</div>
</div>
<div class="method"><h4 id="day">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get day</strong>() <a class="anchor-link" href="#day"
              title="Permalink to DateImplementation.get day">#</a></h4>
<div class="doc">

<pre class="source">
int get day() =&gt; Primitives.getDay(this);
</pre>
</div>
</div>
<div class="method"><h4 id="difference">
<span class="show-code">Code</span>
<a href="../core/Duration.html">Duration</a> <strong>difference</strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#difference"
              title="Permalink to DateImplementation.difference">#</a></h4>
<div class="doc">

<pre class="source">
Duration difference(Date other) {
  int ms = millisecondsSinceEpoch;
  int otherMs = other.millisecondsSinceEpoch;
  return new DurationImplementation(milliseconds: ms - otherMs);
}
</pre>
</div>
</div>
<div class="method"><h4 id="hashCode">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>hashCode</strong>() <a class="anchor-link" href="#hashCode"
              title="Permalink to DateImplementation.hashCode">#</a></h4>
<div class="doc">

<pre class="source">
int hashCode() =&gt; millisecondsSinceEpoch;
</pre>
</div>
</div>
<div class="method"><h4 id="hour">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get hour</strong>() <a class="anchor-link" href="#hour"
              title="Permalink to DateImplementation.get hour">#</a></h4>
<div class="doc">

<pre class="source">
int get hour() =&gt; Primitives.getHours(this);
</pre>
</div>
</div>
<div class="method"><h4 id="millisecond">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get millisecond</strong>() <a class="anchor-link" href="#millisecond"
              title="Permalink to DateImplementation.get millisecond">#</a></h4>
<div class="doc">

<pre class="source">
int get millisecond() =&gt; Primitives.getMilliseconds(this);
</pre>
</div>
</div>
<div class="method"><h4 id="minute">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get minute</strong>() <a class="anchor-link" href="#minute"
              title="Permalink to DateImplementation.get minute">#</a></h4>
<div class="doc">

<pre class="source">
int get minute() =&gt; Primitives.getMinutes(this);
</pre>
</div>
</div>
<div class="method"><h4 id="month">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get month</strong>() <a class="anchor-link" href="#month"
              title="Permalink to DateImplementation.get month">#</a></h4>
<div class="doc">

<pre class="source">
int get month() =&gt; Primitives.getMonth(this);
</pre>
</div>
</div>
<div class="method"><h4 id="operator">
<span class="show-code">Code</span>
<a href="../core/bool.html">bool</a> <strong>operator >=</strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#operator"
              title="Permalink to DateImplementation.operator >=">#</a></h4>
<div class="doc">

<pre class="source">
bool operator &gt;=(Date other)
    =&gt; millisecondsSinceEpoch &gt;= other.millisecondsSinceEpoch;
</pre>
</div>
</div>
<div class="method"><h4 id="operator">
<span class="show-code">Code</span>
<a href="../core/bool.html">bool</a> <strong>operator ></strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#operator"
              title="Permalink to DateImplementation.operator >">#</a></h4>
<div class="doc">

<pre class="source">
bool operator &gt;(Date other)
    =&gt; millisecondsSinceEpoch &gt; other.millisecondsSinceEpoch;
</pre>
</div>
</div>
<div class="method"><h4 id="operator">
<span class="show-code">Code</span>
<a href="../core/bool.html">bool</a> <strong>operator <=</strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#operator"
              title="Permalink to DateImplementation.operator <=">#</a></h4>
<div class="doc">

<pre class="source">
bool operator &lt;=(Date other)
    =&gt; millisecondsSinceEpoch &lt;= other.millisecondsSinceEpoch;
</pre>
</div>
</div>
<div class="method"><h4 id="operator">
<span class="show-code">Code</span>
<a href="../core/bool.html">bool</a> <strong>operator <</strong>(<a href="../core/Date.html">Date</a> other) <a class="anchor-link" href="#operator"
              title="Permalink to DateImplementation.operator <">#</a></h4>
<div class="doc">

<pre class="source">
bool operator &lt;(Date other)
    =&gt; millisecondsSinceEpoch &lt; other.millisecondsSinceEpoch;
</pre>
</div>
</div>
<div class="method"><h4 id="operator">
<span class="show-code">Code</span>
<a href="../core/bool.html">bool</a> <strong>operator ==</strong>(other) <a class="anchor-link" href="#operator"
              title="Permalink to DateImplementation.operator ==">#</a></h4>
<div class="doc">

<pre class="source">
bool operator ==(other) {
  if (!(other is DateImplementation)) return false;
  int ms = millisecondsSinceEpoch;
  int otherMs = other.millisecondsSinceEpoch;
  return (ms == otherMs);
}
</pre>
</div>
</div>
<div class="method"><h4 id="second">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get second</strong>() <a class="anchor-link" href="#second"
              title="Permalink to DateImplementation.get second">#</a></h4>
<div class="doc">

<pre class="source">
int get second() =&gt; Primitives.getSeconds(this);
</pre>
</div>
</div>
<div class="method"><h4 id="subtract">
<span class="show-code">Code</span>
<a href="../core/Date.html">Date</a> <strong>subtract</strong>(<a href="../core/Duration.html">Duration</a> duration) <a class="anchor-link" href="#subtract"
              title="Permalink to DateImplementation.subtract">#</a></h4>
<div class="doc">

<pre class="source">
Date subtract(Duration duration) {
  int ms = millisecondsSinceEpoch;
  return new DateImplementation.fromMillisecondsSinceEpoch(
      ms - duration.inMilliseconds, isUtc);
}
</pre>
</div>
</div>
<div class="method"><h4 id="timeZoneName">
<span class="show-code">Code</span>
<a href="../core/String.html">String</a> <strong>get timeZoneName</strong>() <a class="anchor-link" href="#timeZoneName"
              title="Permalink to DateImplementation.get timeZoneName">#</a></h4>
<div class="doc">

<pre class="source">
String get timeZoneName() {
  if (isUtc) return "UTC";
  return Primitives.getTimeZoneName(this);
}
</pre>
</div>
</div>
<div class="method"><h4 id="timeZoneOffset">
<span class="show-code">Code</span>
<a href="../core/Duration.html">Duration</a> <strong>get timeZoneOffset</strong>() <a class="anchor-link" href="#timeZoneOffset"
              title="Permalink to DateImplementation.get timeZoneOffset">#</a></h4>
<div class="doc">

<pre class="source">
Duration get timeZoneOffset() {
  if (isUtc) return new Duration(0);
  return new Duration(minutes: Primitives.getTimeZoneOffsetInMinutes(this));
}
</pre>
</div>
</div>
<div class="method"><h4 id="toLocal">
<span class="show-code">Code</span>
<a href="../core/Date.html">Date</a> <strong>toLocal</strong>() <a class="anchor-link" href="#toLocal"
              title="Permalink to DateImplementation.toLocal">#</a></h4>
<div class="doc">

<pre class="source">
Date toLocal() {
  if (isUtc) {
    int ms = millisecondsSinceEpoch;
    return new DateImplementation.fromMillisecondsSinceEpoch(ms, false);
  }
  return this;
}
</pre>
</div>
</div>
<div class="method"><h4 id="toString">
<span class="show-code">Code</span>
<a href="../core/String.html">String</a> <strong>toString</strong>() <a class="anchor-link" href="#toString"
              title="Permalink to DateImplementation.toString">#</a></h4>
<div class="doc">

<pre class="source">
String toString() {
  String fourDigits(int n) {
    int absN = n.abs();
    String sign = n &lt; 0 ? "-" : "";
    if (absN &gt;= 1000) return "$n";
    if (absN &gt;= 100) return "${sign}0$absN";
    if (absN &gt;= 10) return "${sign}00$absN";
    return "${sign}000$absN";
  }

  String threeDigits(int n) {
    if (n &gt;= 100) return "${n}";
    if (n &gt;= 10) return "0${n}";
    return "00${n}";
  }

  String twoDigits(int n) {
    if (n &gt;= 10) return "${n}";
    return "0${n}";
  }

  String y = fourDigits(year);
  String m = twoDigits(month);
  String d = twoDigits(day);
  String h = twoDigits(hour);
  String min = twoDigits(minute);
  String sec = twoDigits(second);
  String ms = threeDigits(millisecond);
  if (isUtc) {
    return "$y-$m-$d $h:$min:$sec.${ms}Z";
  } else {
    return "$y-$m-$d $h:$min:$sec.$ms";
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="toUtc">
<span class="show-code">Code</span>
<a href="../core/Date.html">Date</a> <strong>toUtc</strong>() <a class="anchor-link" href="#toUtc"
              title="Permalink to DateImplementation.toUtc">#</a></h4>
<div class="doc">

<pre class="source">
Date toUtc() {
  if (isUtc) return this;
  int ms = millisecondsSinceEpoch;
  return new DateImplementation.fromMillisecondsSinceEpoch(ms, true);
}
</pre>
</div>
</div>
<div class="method"><h4 id="weekday">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get weekday</strong>() <a class="anchor-link" href="#weekday"
              title="Permalink to DateImplementation.get weekday">#</a></h4>
<div class="doc">

<pre class="source">
int get weekday() {
  // Adjust by one because JS weeks start on Sunday.
  var day = Primitives.getWeekday(this);
  return (day + 6) % 7 + Date.MON;
}
</pre>
</div>
</div>
<div class="method"><h4 id="year">
<span class="show-code">Code</span>
<a href="../core/int.html">int</a> <strong>get year</strong>() <a class="anchor-link" href="#year"
              title="Permalink to DateImplementation.get year">#</a></h4>
<div class="doc">

<pre class="source">
int get year() =&gt; Primitives.getYear(this);
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="isUtc">
<span class="show-code">Code</span>
final <a href="../core/bool.html">bool</a>         <strong>isUtc</strong> <a class="anchor-link"
            href="#isUtc"
            title="Permalink to DateImplementation.isUtc">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final bool isUtc;
</pre>
</div>
</div>
<div class="field"><h4 id="millisecondsSinceEpoch">
<span class="show-code">Code</span>
final <a href="../core/int.html">int</a>         <strong>millisecondsSinceEpoch</strong> <a class="anchor-link"
            href="#millisecondsSinceEpoch"
            title="Permalink to DateImplementation.millisecondsSinceEpoch">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final int millisecondsSinceEpoch;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
